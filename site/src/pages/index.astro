---
import Page from '../layouts/page/Page.astro';
import Button from '../components/button/Button.astro';
import Highlight from '../components/highlight/Highlight.astro';
import ToolContainer from '../components/tool-container/ToolContainer.astro';
import Section from '../components/section/Section.astro';
import { Image } from 'astro:assets';
import avatar from '../assets/images/avatar.png';
import type { ToolProps } from '../components/tool/ToolProps';
import { getCollection } from 'astro:content';

const tools: ToolProps[] = [
  { 
    name: 'Angular',
    imgSrc: '/images/tools/angular.svg'
  },
  {
    name: 'React',
    imgSrc: '/images/tools/react.svg'
  },
  {
    name: 'Sass',
    imgSrc: '/images/tools/sass.png'
  },
  {
    name: 'dotnet',
    imgSrc: '/images/tools/dotnet.svg'
  },
  {
    name: 'docker',
    imgSrc: '/images/tools/docker.png'
  },
  {
    name: 'netlify',
    imgSrc: '/images/tools/netlify.svg'
  },
  {
    name: 'Azure DevOps',
    imgSrc: '/images/tools/azure.png'
  }
];

const topThreePosts = (await getCollection('blog'))
  .sort(
    (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
  )
  .slice(0, 3);

const title = "Home | Mitchell Hayward";
const description = "Hey I'm Mitch! I'm a software developer with a passion for front-end development, game development, and test automation! Here you'll find my blog and developer portfolio, feel free to have a lil' nosey - I don't bite!";
---

<Page className="page-landing" title={title} description={description}>
  <Image src={avatar}
         class="img-avatar"
         width="400"
         height="400"
         alt="Avatar" />
  <h1 class="h1-landing">
    Hey, I'm Mitch <span class="wave">ðŸ‘‹</span>
  </h1>
  <p class="landing-blurb">
    A full-stack software engineer with over <Highlight text="five years" /> experience!
  </p>

  <Section class='tools-section'
           title="I've shipped 5+ apps for the web and mobile ðŸš€">
    <p>
      I've worked on various teams to help deliver exceptional, performant and accessible customer experiences to thousands of people.
    </p>

    <h3>What's on my toolbelt?</h3>

    <ToolContainer tools={tools} />
  </Section>

  <Section title='I love to learn and share knowledge!'>
    <p>
      I'm a tinkerer at heart, I'm extremely passionate about experimenting and learning from anything new or existing.
    </p>

    <h3>Latest blog posts</h3>
    
    <!-- Preview of blog -->
    <div class="blog-posts-container">
    {
      topThreePosts.map(post => (
        <a class="blog-post-container" href={`/blog/${post.slug}`}>
          <img src={post.data.heroImage} alt={`${post.data.title} banner image`} />
          <h4>{post.data.title}</h4>
          <p>{post.data.description}</p>
        </a>
      ))
    }
    </div>

    <Button text='View all' href="/blog" />
  </Section>
</Page>

<!-- Scoped styles -->
<style lang="scss">
  @use '../styles/pages/Home.scss' as *;

  .page-landing {
    @include home-page-styles();
  }
</style>